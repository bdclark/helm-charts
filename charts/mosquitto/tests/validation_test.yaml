suite: test validation
templates:
  - deployment.yaml
  - statefulset.yaml
tests:
  - it: should accept deployment workload type  
    set:
      workload.type: Deployment
    template: deployment.yaml
    asserts:
      - hasDocuments:
          count: 1
      - isKind:
          of: Deployment

  - it: should not create statefulset when using deployment
    set:
      workload.type: Deployment
    template: statefulset.yaml
    asserts:
      - hasDocuments:
          count: 0

  - it: should accept statefulset workload type
    set:
      workload.type: StatefulSet
    template: statefulset.yaml
    asserts:
      - hasDocuments:
          count: 1
      - isKind:
          of: StatefulSet

  - it: should not create deployment when using statefulset
    set:
      workload.type: StatefulSet
    template: deployment.yaml
    asserts:
      - hasDocuments:
          count: 0