# Default values for mealie.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

# -- Number of replicas for the mealie deployment
# SQLite requires a single instance
replicaCount: 1

# Container image configuration
image:
  # -- Image repository
  repository: ghcr.io/mealie-recipes/mealie
  # -- Image tag
  tag: "v3.9.2"
  # -- Image pull policy
  pullPolicy: IfNotPresent

# -- Image pull secrets for private registries
imagePullSecrets: []

# -- Override the chart name
nameOverride: ""
# -- Override the full release name
fullnameOverride: ""

# -- Pod annotations applied to the mealie pod
podAnnotations: {}
# -- Pod labels applied to the mealie pod
podLabels: {}

# -- Pod-level security context
podSecurityContext: {}
  # fsGroup: 2000

# -- Container-level security context
securityContext: {}
  # capabilities:
  #   drop:
  #   - ALL
  # readOnlyRootFilesystem: true
  # runAsNonRoot: true
  # runAsUser: 1000

# Service configuration
service:
  # -- Service type (ClusterIP/LoadBalancer/NodePort)
  type: ClusterIP
  # -- Service port
  port: 9000

# Ingress configuration
ingress:
  # -- Enable ingress
  enabled: false
  # -- Ingress class name
  className: ""
  # -- Additional ingress annotations
  annotations: {}
    # kubernetes.io/ingress.class: nginx
    # kubernetes.io/tls-acme: "true"
  # -- Ingress rules configuration
  hosts:
    - host: mealie.local
      paths:
        - path: /
          pathType: ImplementationSpecific
  # -- TLS configuration for ingress
  tls: []
  #  - secretName: chart-example-tls
  #    hosts:
  #      - chart-example.local

# -- Resource requests and limits
resources: {}
  # limits:
  #   cpu: 100m
  #   memory: 128Mi
  # requests:
  #   cpu: 100m
  #   memory: 128Mi

# Persistence storage configuration
persistence:
  # -- Enable persistence
  enabled: true
  # -- Storage class for PVC
  # Set to "-" to disable dynamic provisioning and use default storage class
  # Set to "" to use cluster default storage class
  storageClass: ""
  # -- Access modes for the PVC
  accessModes:
    - ReadWriteOnce
  # -- Requested PVC size
  size: 1Gi
  # -- Use an existing PVC instead of creating a new one
  # If defined, PVC must be created manually before volume will be bound
  existingClaim: ""
  # -- Annotations for PVC
  annotations: {}
    # k8up.io/backup: "true"

# -- Deployment update strategy (default: Recreate when persistence enabled and non-RWX or single replica)
strategy: {}
  # type: RollingUpdate
  # rollingUpdate:
  #   maxSurge: 0
  #   maxUnavailable: 1

# Database configuration
database:
  # -- Database engine to use (sqlite/postgres)
  engine: sqlite

  # PostgreSQL configuration (only used if engine=postgres)
  postgres:
    # Full PostgreSQL connection URL override (if set, this takes precedence over individual parameters)
    urlOverride:
      # -- PostgreSQL connection URL
      value: ""
        # "postgresql://mealie:pass@cnpg-rw.default.svc:5432/mealie"
      existingSecret:
        # -- Secret reference for connection URL
        name: ""
          # "mealie-cnpg-app"
        # -- Key in the secret for connection URL
        key: ""
          # "uri" or "connection" (whatever the secret uses)

    # Individual connection parameters (used if urlOverride is not set)
    server:
      # -- PostgreSQL server/host address
      value: ""
      existingSecret:
        # -- Secret reference for server/host
        name: ""
        # -- Key in the secret for server/host
        key: ""
    port:
      # -- PostgreSQL server/host port
      value: 5432
      existingSecret:
        # -- Secret reference for port
        name: ""
        # -- Key in the secret for port
        key: ""
    db:
      # -- PostgreSQL database name
      value: "mealie"
      existingSecret:
        # -- Secret reference for database name
        name: ""
        # -- Key in the secret for database name
        key: ""
    user:
      # -- PostgreSQL username
      value: ""
      existingSecret:
        # -- Secret reference for username
        name: ""
        # -- Key in the secret for username
        key: ""
    password:
      # -- PostgreSQL password
      value: ""
      existingSecret:
        # -- Secret reference for password
        name: ""
        # -- Key in the secret for password
        key: ""

# -- Extra environment variables for the container
extraEnv: []
  # - name: MY_ENV_VAR
  #   value: "my-value"

# -- Extra environment variable sources (ConfigMap/Secret refs)
extraEnvFrom: []
  # - secretRef:
  #     name: my-secret
  # - configMapRef:
  #     name: my-configmap

# -- Liveness probe configuration
livenessProbe:
  httpGet:
    path: /
    port: http

# -- Readiness probe configuration
readinessProbe:
  httpGet:
    path: /
    port: http

# -- Startup probe configuration
startupProbe: {}

# -- Extra volume mounts for the container
volumeMounts: []
# - name: foo
#   mountPath: "/etc/foo"
#   readOnly: true

# -- Node selector for scheduling
nodeSelector: {}

# -- Pod tolerations
tolerations: []

# -- Pod affinity/anti-affinity
affinity: {}
